# ハンズオンの内容

AWS SDK JSを使ってブラウザから簡単にS3へファイルアップロードする.
多分ハンズオンだけなら30～45分位で終わるとおもう。

# つかうサービス

- S3
- Cognito
- IAM

# S3のバケット作成、CognitoのIDプール作成はAWSコンソールからやる

AWSマネージメントコンソールで画面右上のリージョンが **東京** であることを確認。

- S3のバケット
1. AWSマネージメントコンソールの **AWSのサービス** のところで「s3」と入力して表示されるリストの1番目を選択する
2. S3バケット画面で **バケットを作成する** ボタンをクリック
3. バケット名は **jaws09-20190706-<姓>** にする(例: jaws09-20190706-tamura)
4. リージョンが **アジアパシフィック(東京)** なのを確認
5. オプションの設定、アクセス許可の設定は変更なし
6. 確認画面はバケット名とリージョンを再確認し、バケット名はコピペしておく

- CognitoのIDプール
1. AWSマネージメントコンソールの **AWSのサービス** のところで「cognito」と入力して表示されるリストの1番目を選択する
2. **IDプールの管理** ボタンをクリック
3. 新しいIDプールの作成で、IDプール名は **jaws09_20190706_<姓>** にする(例: jaws09_20190706_tamura)
4. S3と違ってハイフンが使えないのでアンダーバー
5. **認証されていないIDに対してアクセスを有効にする** チェックボックスをチェック
6. **プールの作成** ボタンをクリック
7. **Your Cognito identities require access to your resousces** の画面では **詳細を非表示** のところをクリックしてアコーディオンを開いて確認
8. **IAMロール** がいずれも **新しいIAMロールの作成** になっていることを確認
9. **ロール名** は特に変更しない
10. **許可** ボタンをクリック
11. **Amazon Cognito での作業開始** 画面が開いたら **プラットフォーム** のプルダウンで **JavaScript** を選択
12. 表示される **AWS認証情報の取得** 欄をまるごとコピペしておく

- IAMでCognitoのRoleへのポリシー設定
1. AWSマネージメントコンソールの **AWSのサービス** のところで「iam」と入力して表示されるリストの1番目を選択する
2. 画面左側のメニューから **ロール** を選択する
3. ロール一覧から **Cognito_jaws09_20190706** から始まるものが2つあるはずなので、そのうちの2つ目を選択
4. **ロールARN** のところが **Unauth_Role** で終わっているのを確認する
5. **Auth_Role** になっていたら違うので、もう一度選択し直す
6. **ポリシーをアタッチします** ボタンをクリック
7. **ポリシーのフィルタ** に「s3」と入力して絞り込まれたリストから **AmazonS3FullAccess** の左側のチェックボックスをチェック
8. **ポリシーのアタッチ** ボタンをクリック


# S3へのアップロードのhtml, js
see: [index.html](/index.html)

# S3へアップロードしたものの確認もAWSコンソールからS3をひらいて確認する

